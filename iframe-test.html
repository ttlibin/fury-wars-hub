<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Iframe åµŒå…¥æµ‹è¯• - Fury Wars</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #1a1a1a;
            color: #fff;
            padding: 20px;
            margin: 0;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        h1 {
            color: #ff4500;
            text-align: center;
            margin-bottom: 30px;
        }
        
        .test-section {
            margin-bottom: 40px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            border: 2px solid #ff4500;
        }
        
        .test-section h2 {
            color: #ffd700;
            margin-bottom: 15px;
        }
        
        .iframe-container {
            position: relative;
            width: 100%;
            height: 400px;
            border: 2px solid #ff4500;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 15px;
        }
        
        .iframe-container iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
        
        .status {
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 10px;
            font-weight: bold;
        }
        
        .status.loading {
            background: rgba(255, 165, 0, 0.2);
            color: #ffa500;
        }
        
        .status.success {
            background: rgba(0, 255, 0, 0.2);
            color: #00ff00;
        }
        
        .status.error {
            background: rgba(255, 0, 0, 0.2);
            color: #ff6b6b;
        }
        
        .test-info {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 5px;
            margin-top: 10px;
        }
        
        .test-info h4 {
            color: #ffd700;
            margin-bottom: 10px;
        }
        
        .test-info ul {
            margin: 10px 0;
            padding-left: 20px;
        }
        
        .test-info li {
            margin-bottom: 5px;
        }
        
        .btn {
            background: #ff4500;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
            transition: all 0.3s ease;
        }
        
        .btn:hover {
            background: #ff6b35;
            transform: translateY(-2px);
        }
        
        .log {
            background: #000;
            color: #00ff00;
            padding: 15px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            max-height: 200px;
            overflow-y: auto;
            margin-top: 15px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ” Iframe åµŒå…¥è¯Šæ–­å·¥å…·</h1>
        
        <div class="test-section">
            <h2>ğŸ® Zahraj.sk - Fury Wars (æœ€æ–°æ¨è)</h2>
            <div class="status loading" id="status-zahraj">â³ æ­£åœ¨åŠ è½½...</div>
            <div class="iframe-container">
                <iframe id="iframe-zahraj" src="https://www.zahraj.sk/embed/fury-wars/"></iframe>
            </div>
            <div class="test-info">
                <h4>æµ‹è¯•ä¿¡æ¯ï¼š</h4>
                <ul>
                    <li><strong>URL:</strong> https://www.zahraj.sk/embed/fury-wars/</li>
                    <li><strong>å¹³å°:</strong> Zahraj.sk</li>
                    <li><strong>é¢„æœŸç»“æœ:</strong> åº”è¯¥å¯ä»¥æ­£å¸¸åµŒå…¥ï¼Œæ— é‡å®šå‘é—®é¢˜</li>
                    <li><strong>ä¼˜åŠ¿:</strong> æ–¯æ´›ä¼å…‹æ¸¸æˆå¹³å°ï¼Œé€šå¸¸æ”¯æŒiframeåµŒå…¥</li>
                </ul>
            </div>
        </div>

        <div class="test-section">
            <h2>ğŸ® Miniplay - Fury Wars</h2>
            <div class="status loading" id="status-1">â³ æ­£åœ¨åŠ è½½...</div>
            <div class="iframe-container">
                <iframe id="iframe-1" src="https://www.miniplay.com/embed/fury-wars"></iframe>
            </div>
            <div class="test-info">
                <h4>æµ‹è¯•ä¿¡æ¯ï¼š</h4>
                <ul>
                    <li><strong>URL:</strong> https://www.miniplay.com/embed/fury-wars</li>
                    <li><strong>å¹³å°:</strong> Miniplay</li>
                    <li><strong>é¢„æœŸç»“æœ:</strong> å¯èƒ½ä¼šé‡å®šå‘åˆ°playhop.comå¹¶è¢«æ‹’ç»</li>
                </ul>
            </div>
        </div>

        <div class="test-section">
            <h2>ğŸ® GameFlare - Fury Wars (å¤‡ç”¨)</h2>
            <div class="status loading" id="status-2">â³ æ­£åœ¨åŠ è½½...</div>
            <div class="iframe-container">
                <iframe id="iframe-2" src="https://www.gameflare.com/embed/fury-wars/"></iframe>
            </div>
            <div class="test-info">
                <h4>æµ‹è¯•ä¿¡æ¯ï¼š</h4>
                <ul>
                    <li><strong>URL:</strong> https://www.gameflare.com/embed/fury-wars/</li>
                    <li><strong>å¹³å°:</strong> GameFlare</li>
                    <li><strong>é¢„æœŸç»“æœ:</strong> åº”è¯¥å¯ä»¥æ­£å¸¸åµŒå…¥</li>
                </ul>
            </div>
        </div>

        <div class="test-section">
            <h2>ğŸ¯ CrazyGames - Fragen</h2>
            <div class="status loading" id="status-3">â³ æ­£åœ¨åŠ è½½...</div>
            <div class="iframe-container">
                <iframe id="iframe-3" src="https://www.crazygames.com/embed/fragen"></iframe>
            </div>
            <div class="test-info">
                <h4>æµ‹è¯•ä¿¡æ¯ï¼š</h4>
                <ul>
                    <li><strong>URL:</strong> https://www.crazygames.com/embed/fragen</li>
                    <li><strong>å¹³å°:</strong> CrazyGames</li>
                    <li><strong>é¢„æœŸç»“æœ:</strong> å¯èƒ½è¢«é‡å®šå‘æˆ–æ‹’ç»</li>
                </ul>
            </div>
        </div>

        <div class="test-section">
            <h2>ğŸ”¬ è¯Šæ–­æ§åˆ¶</h2>
            <button class="btn" onclick="testAllIframes()">ğŸ”„ é‡æ–°æµ‹è¯•æ‰€æœ‰</button>
            <button class="btn" onclick="clearLog()">ğŸ—‘ï¸ æ¸…ç©ºæ—¥å¿—</button>
            <button class="btn" onclick="checkRedirects()">ğŸ” æ£€æŸ¥é‡å®šå‘</button>
            
            <div class="log" id="diagnostic-log">
                <div>ğŸš€ è¯Šæ–­å·¥å…·å·²å‡†å¤‡å°±ç»ª...</div>
                <div>ğŸ“ è¿™ä¸ªå·¥å…·å°†å¸®åŠ©æ£€æµ‹iframeåµŒå…¥é—®é¢˜</div>
                <div>âš ï¸ å¦‚æœçœ‹åˆ°"æ‹’ç»è¿æ¥"é”™è¯¯ï¼Œè¯´æ˜å¹³å°ä¸å…è®¸iframeåµŒå…¥</div>
            </div>
        </div>
    </div>

    <script>
        // è¯Šæ–­æ—¥å¿—
        function log(message, type = 'info') {
            const logElement = document.getElementById('diagnostic-log');
            const timestamp = new Date().toLocaleTimeString();
            const colors = {
                info: '#00ff00',
                warn: '#ffa500',
                error: '#ff6b6b',
                success: '#00ff00'
            };
            
            const div = document.createElement('div');
            div.style.color = colors[type] || '#00ff00';
            div.innerHTML = `[${timestamp}] ${message}`;
            logElement.appendChild(div);
            logElement.scrollTop = logElement.scrollHeight;
        }

        // è®¾ç½®iframeç›‘å¬å™¨
        function setupIframeListeners() {
            // åŒ…æ‹¬zahrajæµ‹è¯•æ¡†æ¶
            const iframes = document.querySelectorAll('iframe');
            const statusIds = ['status-zahraj', 'status-1', 'status-2', 'status-3'];
            
            iframes.forEach((iframe, index) => {
                const statusElement = document.getElementById(statusIds[index]);
                if (!statusElement) return;
                
                const iframeIndex = index + 1;
                
                // åŠ è½½æˆåŠŸ
                iframe.onload = function() {
                    log(`âœ… Iframe ${iframeIndex} åŠ è½½æˆåŠŸ: ${iframe.src}`, 'success');
                    statusElement.className = 'status success';
                    statusElement.textContent = 'âœ… åŠ è½½æˆåŠŸ';
                    
                    // æ£€æŸ¥æ˜¯å¦çœŸçš„åŠ è½½äº†å†…å®¹
                    setTimeout(() => {
                        try {
                            const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
                            if (iframeDoc) {
                                log(`ğŸ“„ Iframe ${iframeIndex} å†…å®¹å¯è®¿é—®`, 'success');
                            }
                        } catch (error) {
                            log(`ğŸ”’ Iframe ${iframeIndex} å†…å®¹å—CORSä¿æŠ¤: ${error.message}`, 'warn');
                        }
                    }, 1000);
                };
                
                // åŠ è½½å¤±è´¥
                iframe.onerror = function() {
                    log(`âŒ Iframe ${iframeIndex} åŠ è½½å¤±è´¥: ${iframe.src}`, 'error');
                    statusElement.className = 'status error';
                    statusElement.textContent = 'âŒ åŠ è½½å¤±è´¥';
                };
                
                // è¶…æ—¶æ£€æµ‹
                setTimeout(() => {
                    if (statusElement.className.includes('loading')) {
                        log(`â° Iframe ${iframeIndex} åŠ è½½è¶…æ—¶ï¼Œå¯èƒ½è¢«é˜»æ­¢`, 'warn');
                        statusElement.className = 'status error';
                        statusElement.textContent = 'â° åŠ è½½è¶…æ—¶ - å¯èƒ½è¢«é˜»æ­¢';
                    }
                }, 10000);
            });
        }

        // æ£€æŸ¥é‡å®šå‘
        async function checkRedirects() {
            log('ğŸ” å¼€å§‹æ£€æŸ¥URLé‡å®šå‘...', 'info');
            
            const urls = [
                'https://www.zahraj.sk/embed/fury-wars/',
                'https://www.miniplay.com/embed/fury-wars',
                'https://www.gameflare.com/embed/fury-wars/',
                'https://www.crazygames.com/embed/fragen'
            ];
            
            for (let i = 0; i < urls.length; i++) {
                const url = urls[i];
                try {
                    log(`ğŸŒ æ£€æŸ¥URL: ${url}`, 'info');
                    
                    const response = await fetch(url, {
                        method: 'HEAD',
                        mode: 'no-cors'
                    });
                    
                    log(`ğŸ“¡ å“åº”çŠ¶æ€: ${response.status || 'æœªçŸ¥ (CORSé™åˆ¶)'}`, 'info');
                    
                } catch (error) {
                    log(`âš ï¸ è¯·æ±‚å¤±è´¥: ${error.message}`, 'warn');
                    
                    if (error.message.includes('CORS')) {
                        log(`ğŸ”’ CORSé”™è¯¯é€šå¸¸æ„å‘³ç€æœåŠ¡å™¨æ‹’ç»è·¨åŸŸè¯·æ±‚`, 'warn');
                    }
                }
            }
        }

        // é‡æ–°æµ‹è¯•æ‰€æœ‰iframe
        function testAllIframes() {
            log('ğŸ”„ é‡æ–°åŠ è½½æ‰€æœ‰iframe...', 'info');
            
            const iframes = document.querySelectorAll('iframe');
            const statusElements = document.querySelectorAll('.status');
            
            statusElements.forEach((status, index) => {
                status.className = 'status loading';
                status.textContent = 'â³ æ­£åœ¨åŠ è½½...';
            });
            
            iframes.forEach((iframe, index) => {
                const originalSrc = iframe.src;
                iframe.src = '';
                setTimeout(() => {
                    iframe.src = originalSrc;
                    log(`ğŸ”„ é‡æ–°åŠ è½½ Iframe ${index + 1}`, 'info');
                }, 500);
            });
        }

        // æ¸…ç©ºæ—¥å¿—
        function clearLog() {
            const logElement = document.getElementById('diagnostic-log');
            logElement.innerHTML = '<div>ğŸ§¹ æ—¥å¿—å·²æ¸…ç©º</div>';
        }

        // ç›‘å¬å®‰å…¨ç­–ç•¥è¿è§„
        document.addEventListener('securitypolicyviolation', function(e) {
            log(`ğŸš¨ å®‰å…¨ç­–ç•¥è¿è§„: ${e.violatedDirective} - ${e.blockedURI}`, 'error');
        });

        // ç›‘å¬å…¨å±€é”™è¯¯
        window.addEventListener('error', function(e) {
            if (e.message.includes('iframe') || e.message.includes('frame')) {
                log(`ğŸš¨ Iframeç›¸å…³é”™è¯¯: ${e.message}`, 'error');
            }
        });

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            log('ğŸ¯ é¡µé¢åŠ è½½å®Œæˆï¼Œå¼€å§‹iframeè¯Šæ–­...', 'info');
            setupIframeListeners();
            
            // 5ç§’åè‡ªåŠ¨æ£€æŸ¥é‡å®šå‘
            setTimeout(() => {
                checkRedirects();
            }, 5000);
        });
    </script>
</body>
</html> 